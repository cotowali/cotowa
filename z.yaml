default: hello
tasks:
  hello: z run examples/hello.ri
  run: v run cmd/ri/main.v $@
  build: mkdir -p .bin && v cmd/ri/main.v -o .bin/ri
  test: v test .
  test.hello: z run examples/hello.ri
  fmt: v fmt -w .
  fmt.c: z fmt && z test && git add . && git commit -m 'fmt'
  ast: z run tools ast $@
  tokens: z run tools tokens $@
  ci:
    tasks:
      setup-v: cd /tmp && git clone --depth=1 https://github.com/vlang/v && cd v && make && pwd >> $GITHUB_PATH
      format: v fmt -verify .
      test: z test
