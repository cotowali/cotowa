default: build
tasks:
  run: v run cmd/ric/main.v $@
  build: mkdir -p .bin && v cmd/ric/main.v -o .bin/ric
  build.c: v cmd/ric/main.v -o main.c
  symlink: ln -fs $(pwd)/.bin/ric /usr/local/bin/ric
  test: v test .
  test.fix: v -d fix test .
  test.hello: z run examples/hello.ri
  fmt: v fmt -w .
  fmt.c: z fmt && z test && git add . && git commit -m 'fmt'
  ast: z run tools ast $@
  tokens: z run tools tokens $@
  scope: z run tools scope $@
  ci:
    tasks:
      setup-v: cd /tmp && git clone --depth=1 https://github.com/vlang/v && cd v && make && pwd >> $GITHUB_PATH
      format: v fmt -verify .
      test: z test
